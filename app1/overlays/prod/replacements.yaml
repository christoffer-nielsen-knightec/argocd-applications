# ============================= ConfigMap source =============================
- source:
    kind: ConfigMap
    name: configmap
    fieldPath: data.DNS_PREFIX
  targets:
    - select:
        kind: Ingress
      fieldPaths:
        - spec.rules.0.host
      options:
        delimiter: "tag-manager"
        index: 0

- source:
    kind: ConfigMap
    name: configmap
    fieldPath: data.DNS_DOMAIN
  targets:
    - select:
        kind: Ingress
      fieldPaths:
        - spec.rules.0.host
      options:
        delimiter: "."
        index: 1

- source:
   kind: ConfigMap
   name: configmap
   fieldPath: data.EXTERNAL_SECRETS_BASE_PATH
  targets:
    - select:
        kind: ExternalSecret
      fieldPaths:
        - spec.data.*.key
      options:
        delimiter: "-"
        index: 0

- source:
    kind: ConfigMap
    name: configmap
    fieldPath: data.NUMBER_OF_REPLICAS
  targets:
    - select:
        kind: Deployment
      fieldPaths:
        - spec.replicas

- source:
    kind: ConfigMap
    name: configmap
    fieldPath: data.DOCKER_IMAGE
  targets:
    - select:
        kind: Deployment
      fieldPaths:
        - spec.template.spec.containers.0.image
      options:
        delimiter: ":"
        index: 0
        create: true

- source:
    kind: ConfigMap
    name: configmap
    fieldPath: data.DOCKER_IMAGE_TAG
  targets:
    - select:
        kind: Deployment
      fieldPaths:
        - spec.template.spec.containers.0.image
      options:
        delimiter: ":"
        index: 1
        create: true

# =================================================================================